<html>
    <head>
        <title>OSCache : CacheFilter</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            OSCache : CacheFilter
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jan 16, 2005 by <font color="#0050B2">dres1011</font>.
				    </div>

				    <p class="paragraph">OSCache comes with a servlet filter that enables you to transparently cache entire pages of your website, and even binary files. Caching of binary files is extremely useful when they are generated dynamically, eg PDF files or images.</p>To configure the filter, add something like the following to your web.xml file (obviously you will want to set the URL pattern to match only the content you want to cache; this example will cache all JSP pages):<br/>

<div class="code"><div class="codeContent">
<pre><span class="xml&#45;tag">&lt;filter&gt;</span>&#10;      <span class="xml&#45;tag">&lt;filter&#45;name&gt;</span>CacheFilter<span class="xml&#45;tag">&lt;/filter&#45;name&gt;</span>&#10;      <span class="xml&#45;tag">&lt;filter&#45;class&gt;</span>com.opensymphony.oscache.web.filter.CacheFilter<span class="xml&#45;tag">&lt;/filter&#45;class&gt;</span>&#10;   <span class="xml&#45;tag">&lt;/filter&gt;</span>&#10;   <span class="xml&#45;tag">&lt;filter&#45;mapping&gt;</span>&#10;      <span class="xml&#45;tag">&lt;filter&#45;name&gt;</span>CacheFilter<span class="xml&#45;tag">&lt;/filter&#45;name&gt;</span>&#10;      <span class="xml&#45;tag">&lt;url&#45;pattern&gt;</span>&#42;.jsp<span class="xml&#45;tag">&lt;/url&#45;pattern&gt;</span>&#10;   <span class="xml&#45;tag">&lt;/filter&#45;mapping&gt;</span></pre>
</div></div><br/>
The default duration is one hour and the default scope for the cache is application scope. You can change these settings using initialization parameters. The time parameter sets the cache time (in seconds), while the scope parameter lets you set the scope. Valid values for the scope are application and session.<p class="paragraph">As an example, the following settings would cache content for 10 minutes in session scope:</p><div class="code"><div class="codeContent">
<pre><span class="xml&#45;tag">&lt;filter&gt;</span>&#10;      <span class="xml&#45;tag">&lt;filter&#45;name&gt;</span>CacheFilter<span class="xml&#45;tag">&lt;/filter&#45;name&gt;</span>&#10;      <span class="xml&#45;tag">&lt;filter&#45;class&gt;</span>com.opensymphony.oscache.web.filter.CacheFilter<span class="xml&#45;tag">&lt;/filter&#45;class&gt;</span>&#10;      <span class="xml&#45;tag">&lt;init&#45;param&gt;</span>&#10;         <span class="xml&#45;tag">&lt;param&#45;name&gt;</span>time<span class="xml&#45;tag">&lt;/param&#45;name&gt;</span>&#10;         <span class="xml&#45;tag">&lt;param&#45;value&gt;</span>600<span class="xml&#45;tag">&lt;/param&#45;value&gt;</span>&#10;      <span class="xml&#45;tag">&lt;/init&#45;param&gt;</span>&#10;      <span class="xml&#45;tag">&lt;init&#45;param&gt;</span>&#10;         <span class="xml&#45;tag">&lt;param&#45;name&gt;</span>scope<span class="xml&#45;tag">&lt;/param&#45;name&gt;</span>&#10;         <span class="xml&#45;tag">&lt;param&#45;value&gt;</span>session<span class="xml&#45;tag">&lt;/param&#45;value&gt;</span>&#10;      <span class="xml&#45;tag">&lt;/init&#45;param&gt;</span>&#10;   <span class="xml&#45;tag">&lt;/filter&gt;</span></pre>
</div></div><br/>
Note that the filter will only cache content that has a status of 200 (HttpServletResponse.SC_OK).

				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="border/border_bottom.gif"><img src="border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jan 18, 2005 00:39</font></td>
		    </tr>
	    </table>
    </body>
</html>